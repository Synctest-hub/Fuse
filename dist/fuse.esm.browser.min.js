/**
 * Fuse.js v5.0.7-beta - Lightweight fuzzy-search (http://fusejs.io)
 *
 * Copyright (c) 2020 Kiro Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */
function t(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:i=100}){const r=e/t.length,o=Math.abs(n-s);return i?r+o/i:o?1:r}class e{constructor(t,{location:e=0,distance:s=100,threshold:n=.6,isCaseSensitive:i=!1,findAllMatches:r=!1,minMatchCharLength:o=1,includeMatches:h=!1}){if(this.options={location:e,distance:s,threshold:n,isCaseSensitive:i,findAllMatches:r,includeMatches:h,minMatchCharLength:o},t.length>32)throw new Error("Pattern length exceeds max of 32.");this.pattern=i?t:t.toLowerCase(),this.patternAlphabet=function(t){let e={},s=t.length;for(let n=0;n<s;n+=1)e[t.charAt(n)]=0;for(let n=0;n<s;n+=1)e[t.charAt(n)]|=1<<s-n-1;return e}(this.pattern)}searchIn(t){let e=t.$;return this.searchInString(e)}searchInString(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.matchedIndices=[[0,e.length-1]]),t}const{location:i,distance:r,threshold:o,findAllMatches:h,minMatchCharLength:c}=this.options;return function(e,s,n,{location:i=0,distance:r=100,threshold:o=.6,findAllMatches:h=!1,minMatchCharLength:c=1,includeMatches:l=!1}){const a=s.length,u=e.length,f=Math.max(0,Math.min(i,u));let d=o,g=e.indexOf(s,f);const p=[];for(let t=0;t<u;t+=1)p[t]=0;if(-1!==g){let n=t(s,{errors:0,currentLocation:g,expectedLocation:f,distance:r});if(d=Math.min(n,d),g=e.lastIndexOf(s,f+a),-1!==g){let e=t(s,{errors:0,currentLocation:g,expectedLocation:f,distance:r});d=Math.min(e,d)}}g=-1;let y=[],m=1,M=a+u;const x=1<<(a<=31?a-1:30);for(let i=0;i<a;i+=1){let o=0,c=M;for(;o<c;){t(s,{errors:i,currentLocation:f+c,expectedLocation:f,distance:r})<=d?o=c:M=c,c=Math.floor((M-o)/2+o)}M=c;let l=Math.max(1,f-c+1),_=h?u:Math.min(f+c,u)+a,k=Array(_+2);k[_+1]=(1<<i)-1;for(let o=_;o>=l;o-=1){let h=o-1,c=n[e.charAt(h)];if(c&&(p[h]=1),k[o]=(k[o+1]<<1|1)&c,0!==i&&(k[o]|=(y[o+1]|y[o])<<1|1|y[o+1]),k[o]&x&&(m=t(s,{errors:i,currentLocation:h,expectedLocation:f,distance:r}),m<=d)){if(d=m,g=h,g<=f)break;l=Math.max(1,2*f-g)}}if(t(s,{errors:i+1,currentLocation:f,expectedLocation:f,distance:r})>d)break;y=k}let _={isMatch:g>=0,score:m||.001};return l&&(_.matchedIndices=function(t=[],e=1){let s=[],n=-1,i=-1,r=0;for(let o=t.length;r<o;r+=1){let o=t[r];o&&-1===n?n=r:o||-1===n||(i=r-1,i-n+1>=e&&s.push([n,i]),n=-1)}return t[r-1]&&r-n>=e&&s.push([n,r-1]),s}(p,c)),_}(e,this.pattern,this.patternAlphabet,{location:i,distance:r,threshold:o,findAllMatches:h,minMatchCharLength:c,includeMatches:n})}}const s=t=>t.substr(1);var n=t=>"'"==t.charAt(0),i=(t,e)=>{const n=s(t);return{isMatch:e.indexOf(n)>-1,score:0}};const r=t=>t.substr(1);var o=t=>"!"==t.charAt(0),h=(t,e)=>{const s=r(t);return{isMatch:-1===e.indexOf(s),score:0}};const c=t=>t.substr(1);var l=t=>"^"==t.charAt(0),a=(t,e)=>{const s=c(t);return{isMatch:e.startsWith(s),score:0}};const u=t=>t.substr(2);var f=t=>"!"==t.charAt(0)&&"^"==t.charAt(1),d=(t,e)=>{const s=u(t);return{isMatch:!e.startsWith(s),score:0}};const g=t=>t.substr(0,t.length-1);var p=t=>"$"==t.charAt(t.length-1),y=(t,e)=>{const s=g(t);return{isMatch:e.endsWith(s),score:0}};const m=t=>t.substring(1,t.length-1);var M=t=>"!"==t.charAt(0)&&"$"==t.charAt(t.length-1),x=(t,e)=>{const s=m(t);return{isMatch:!e.endsWith(s),score:0}};const _=t=>Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t),k=t=>"string"==typeof t,S=t=>"number"==typeof t,w=t=>null!=t;class I{constructor(t,e){const{isCaseSensitive:s}=e;this.query=null,this.options=e,this._fuzzyCache={},k(t)&&t.trim().length>0&&(this.pattern=s?t:t.toLowerCase(),this.query=(t=>t.split("|").map(t=>t.trim().split(/ +/g)))(this.pattern))}searchIn(t){const e=this.query;if(!this.query)return{isMatch:!1,score:1};let s=t.$;s=this.options.isCaseSensitive?s:s.toLowerCase();let n=!1;for(let t=0,i=e.length;t<i;t+=1){const i=e[t];let r=null;n=!0;for(let t=0,e=i.length;t<e;t+=1){let e=i[t];if(r=this._search(e,s),!r.isMatch){n=!1;break}}if(n)return r}return{isMatch:!1,score:1}}_search(t,s){if(n(t))return i(t,s);if(l(t))return a(t,s);if(f(t))return d(t,s);if(M(t))return x(t,s);if(p(t))return y(t,s);if(o(t))return h(t,s);{let n=this._fuzzyCache[t];return n||(n=new e(t,this.options),this._fuzzyCache[t]=n),n.searchInString(s)}}}function A(t,{n:e=3,pad:s=!0,sort:n=!1}){let i=[];if(null==t)return i;t=t.toLowerCase(),s&&(t=` ${t} `);let r=t.length-e+1;if(r<1)return i;for(;r--;)i[r]=t.substr(r,e);return n&&i.sort((t,e)=>t==e?0:t<e?-1:1),i}class L{constructor(t,e={threshold:.6}){this.options=e,this.patternNgram=A(t,{sort:!0})}searchIn(t){let e=t.ng;e||(e=A(t.$,{sort:!0}),t.ng=e);let s=function(t,e){let s=function(t,e){let s=[],n=0,i=0;for(;n<t.length&&i<e.length;){let r=t[n],o=e[i];r<o?(s.push(r),n+=1):o<r?(s.push(o),i+=1):(s.push(o),n+=1,i+=1)}for(;n<t.length;)s.push(t[n]),n+=1;for(;i<e.length;)s.push(e[i]),i+=1;return s}(t,e);return 1-function(t,e){let s=[],n=0,i=0;for(;n<t.length&&i<e.length;){let r=t[n],o=e[i];r==o?(s.push(r),n+=1,i+=1):r<o?n+=1:(r>o||(n+=1),i+=1)}return s}(t,e).length/s.length}(this.patternNgram,e);const n=s<this.options.threshold;return{score:n?s:1,isMatch:n}}}function v(t,e){let s=[],n=!1;const i=(t,e)=>{if(e){const r=e.indexOf(".");let o=e,h=null;-1!==r&&(o=e.slice(0,r),h=e.slice(r+1));const c=t[o];if(w(c))if(h||!k(c)&&!S(c))if(_(c)){n=!0;for(let t=0,e=c.length;t<e;t+=1)i(c[t],h)}else h&&i(c,h);else s.push((t=>null==t?"":(t=>{if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e})(t))(c))}else s.push(t)};return i(t,e),n?s:s[0]}function C(t,e,{getFn:s=v,ngrams:n=!1}={}){let i=[];if(k(e[0]))for(let t=0,s=e.length;t<s;t+=1){const s=e[t];if(w(s)){let e={$:s,idx:t};n&&(e.ng=A(s,{sort:!0})),i.push(e)}}else{const r=t.length;for(let o=0,h=e.length;o<h;o+=1){let h=e[o],c={idx:o,$:{}};for(let e=0;e<r;e+=1){let i=t[e],r=s(h,i);if(w(r))if(_(r)){let t=[];const e=[{arrayIndex:-1,value:r}];for(;e.length;){const{arrayIndex:s,value:i}=e.pop();if(w(i))if(k(i)){let e={$:i,idx:s};n&&(e.ng=A(i,{sort:!0})),t.push(e)}else if(_(i))for(let t=0,s=i.length;t<s;t+=1)e.push({arrayIndex:t,value:i[t]})}c.$[i]=t}else{let t={$:r};n&&(t.ng=A(r,{sort:!0})),c.$[i]=t}}i.push(c)}}return i}class b{constructor(t){if(this._keys={},this._keyNames=[],this._length=t.length,t.length&&k(t[0]))for(let e=0;e<this._length;e+=1){const s=t[e];this._keys[s]={weight:1},this._keyNames.push(s)}else{let e=0;for(let s=0;s<this._length;s+=1){const n=t[s];if(!n.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');const i=n.name;if(this._keyNames.push(i),!n.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');const r=n.weight;if(r<=0||r>=1)throw new Error('"weight" property in key must bein the range of (0, 1)');this._keys[i]={weight:r},e+=r}for(let t=0;t<this._length;t+=1){const s=this._keyNames[t],n=this._keys[s].weight;this._keys[s].weight=n/e}}}get(t,e){return this._keys[t]?this._keys[t][e]:-1}keys(){return this._keyNames}count(){return this._length}toJSON(){return JSON.stringify(this._keys)}}function $(t,e){const s=t.matches;if(e.matches=[],w(s))for(let t=0,n=s.length;t<n;t+=1){let n=s[t];if(!w(n.indices)||0===n.indices.length)continue;let i={indices:n.indices,value:n.value};n.key&&(i.key=n.key),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)}}function N(t,e){e.score=t.score}const O={isCaseSensitive:!1,distance:100,findAllMatches:!1,getFn:v,includeMatches:!1,includeScore:!1,keys:[],location:0,minMatchCharLength:1,shouldSort:!0,sortFn:(t,e)=>t.score-e.score,threshold:.6,useExtendedSearch:!1};class E{constructor(t,e=O,s=null){this.options={...O,...e},this.options.isCaseSensitive=e.caseSensitive,delete this.options.caseSensitive,this._processKeys(this.options.keys),this.setCollection(t,s)}setCollection(t,e=null){this.list=t,this.listIsStringArray=k(t[0]),e?this.setIndex(e):this.setIndex(this._createIndex())}setIndex(t){this._indexedList=t}_processKeys(t){this._keyStore=new b(t)}_createIndex(){return C(this._keyStore.keys(),this.list,{getFn:this.options.getFn})}search(t,s={limit:!1}){const{useExtendedSearch:n,shouldSort:i}=this.options;let r=null;r=n?new I(t,this.options):t.length>32?new L(t,this.options):new e(t,this.options);let o=this._searchUsing(r);return this._computeScore(o),i&&this._sort(o),s.limit&&S(s.limit)&&(o=o.slice(0,s.limit)),this._format(o)}_searchUsing(t){const e=this._indexedList,s=[],{includeMatches:n}=this.options;if(this.listIsStringArray)for(let i=0,r=e.length;i<r;i+=1){let r=e[i],{$:o,idx:h}=r;if(!w(o))continue;let c=t.searchIn(r);const{isMatch:l,score:a}=c;if(!l)continue;let u={score:a,value:o};n&&(u.indices=c.matchedIndices),s.push({item:o,idx:h,matches:[u]})}else{const i=this._keyStore.keys(),r=this._keyStore.count();for(let o=0,h=e.length;o<h;o+=1){let{$:h,idx:c}=e[o];if(!w(h))continue;let l=[];for(let e=0;e<r;e+=1){let s=i[e],r=h[s];if(w(r))if(_(r))for(let e=0,i=r.length;e<i;e+=1){let i=r[e],o=i.$,h=i.idx;if(!w(o))continue;let c=t.searchIn(i);const{isMatch:a,score:u}=c;if(!a)continue;let f={score:u,key:s,value:o,idx:h};n&&(f.indices=c.matchedIndices),l.push(f)}else{let e=r.$,i=t.searchIn(r);const{isMatch:o,score:h}=i;if(!o)continue;let c={score:h,key:s,value:e};n&&(c.indices=i.matchedIndices),l.push(c)}}l.length&&s.push({idx:c,item:h,matches:l})}}return s}_computeScore(t){for(let e=0,s=t.length;e<s;e+=1){const s=t[e],n=s.matches,i=n.length;let r=1;for(let t=0;t<i;t+=1){const e=n[t],s=e.key,i=this._keyStore.get(s,"weight"),o=i>-1?i:1,h=0===e.score&&i>-1?Number.EPSILON:e.score;r*=Math.pow(h,o)}s.score=r}}_sort(t){t.sort(this.options.sortFn)}_format(t){const e=[],{includeMatches:s,includeScore:n}=this.options;let i=[];s&&i.push($),n&&i.push(N);for(let s=0,n=t.length;s<n;s+=1){const n=t[s],{idx:r}=n,o={item:this.list[r],refIndex:r};if(i.length)for(let t=0,e=i.length;t<e;t+=1)i[t](n,o);e.push(o)}return e}}E.version="5.0.7-beta",E.createIndex=C;export default E;